
from django.db.models.signals import post_save
from django.dispatch import receiver
from .models import CustomUser, Customer

@receiver(post_save, sender=CustomUser)
def create_customer_profile(sender, instance, created, **kwargs):
    if created:
        Customer.objects.create(user=instance)

@receiver(post_save, sender=CustomUser)
def save_customer_profile(sender, instance, **kwargs):
    instance.customer.save()




















'''
### **๐ ุฎูุงุฑุฒููุฉ ุฅูุดุงุก ุจุฑููุงูู ุงูุนููู ุชููุงุฆููุง ุนูุฏ ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ**  

#### **ุงููุฏุฎูุงุช:**
- ูููุฐุฌ ุงููุณุชุฎุฏู (`CustomUser`).
- ูููุฐุฌ ุงูุนููู (`Customer`).

#### **ุงูุฎุทูุงุช:**
1. **ุฅูุดุงุก ููู ุงูุฅุดุงุฑุงุช (`signals.py`)** ุฏุงุฎู ุงูุชุทุจูู.
2. **ุงุณุชุฎุฏุงู ุฅุดุงุฑุฉ `post_save`** ููุฑุงูุจุฉ ุฃู ุนูููุฉ ุญูุธ (`save()`) ุชุญุฏุซ ุนูู ูููุฐุฌ ุงููุณุชุฎุฏู (`CustomUser`).
3. ุนูุฏ **ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ ูุฃูู ูุฑุฉ (`created=True`)**:
   - **ุฅูุดุงุก ุจุฑููุงูู ุฌุฏูุฏ (`Customer`)** ูุฑุชุจุท ุจุงููุณุชุฎุฏู.
4. ุนูุฏ **ุชุญุฏูุซ ุงููุณุชุฎุฏู ูุงุญููุง**:
   - **ุญูุธ ุงูุชุนุฏููุงุช ูู ุจุฑููุงููู ุชููุงุฆููุง**.
5. **ุชุณุฌูู ุงูุฅุดุงุฑุงุช ูู `apps.py`** ูุถูุงู ุชุดุบูููุง ุนูุฏ ุจุฏุก ุชุดุบูู ุงูุชุทุจูู.
6. **ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ** ูุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช (`migrate`) ูุชูุนูู ุงูุชุบููุฑุงุช.
7. **ุงุฎุชุจุงุฑ ุงูุนูููุฉ** ูู ุฎูุงู ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏุ ุซู ุงูุชุฃูุฏ ูู ุฅูุดุงุก ุงูุจุฑููุงูู ุชููุงุฆููุง.

#### **ุงููุฎุฑุฌุงุช:**
โ ุนูุฏ ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏุ ูุชู ุฅูุดุงุก ุจุฑููุงูู ูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชููุงุฆููุง.
'''