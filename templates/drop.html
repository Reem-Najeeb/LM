{% extends 'base.html' %}
{% load static %}
{% block title %} Home {% endblock %} 

{% block content %}
{% comment %} ๐form  ๐Link  ๐delete ๐ดLoop โendLoop ๐ธdone {% endcomment %}

    <section class="account-section mb-5">

        <div class="container my-3 ">
            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span class="title">ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ</span>
                            <span class="edit-icon">
                                <svg class="edit" width="20" height="20" viewBox="0 0 26 26" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M13 3.25H5.41667C4.84203 3.25 4.29093 3.47827 3.8846 3.8846C3.47827 4.29093 3.25 4.84203 3.25 5.41667V20.5833C3.25 21.158 3.47827 21.7091 3.8846 22.1154C4.29093 22.5217 4.84203 22.75 5.41667 22.75H20.5833C21.158 22.75 21.7091 22.5217 22.1154 22.1154C22.5217 21.7091 22.75 21.158 22.75 20.5833V13"
                                        stroke="#2B4254" stroke-width="2.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                    <path
                                        d="M19.906 2.84302C20.337 2.41204 20.9215 2.16992 21.531 2.16992C22.1405 2.16992 22.725 2.41204 23.156 2.84302C23.587 3.274 23.8291 3.85853 23.8291 4.46802C23.8291 5.07751 23.587 5.66204 23.156 6.09302L13.3919 15.8582C13.1347 16.1152 12.8169 16.3033 12.4679 16.4053L9.35544 17.3153C9.26222 17.3425 9.16341 17.3441 9.06934 17.32C8.97528 17.2959 8.88942 17.2469 8.82076 17.1783C8.7521 17.1096 8.70316 17.0238 8.67906 16.9297C8.65496 16.8356 8.65659 16.7368 8.68378 16.6436L9.59378 13.5312C9.69618 13.1824 9.88469 12.865 10.1419 12.6082L19.906 2.84302Z"
                                        stroke="#2B4254" stroke-width="2.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>

                                <svg class="cancel ms-3" width="20" height="20" viewBox="0 0 66 83" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M32.9997 41.8414L55.0955 63.9372C56.268 65.1097 57.8582 65.7684 59.5163 65.7684C61.1745 65.7684 62.7647 65.1097 63.9371 63.9372C65.1096 62.7647 65.7683 61.1745 65.7683 59.5164C65.7683 57.8583 65.1096 56.268 63.9371 55.0956L41.833 32.9997L63.933 10.9039C64.5133 10.3233 64.9735 9.63418 65.2874 8.87576C65.6014 8.11733 65.7629 7.3045 65.7627 6.48367C65.7625 5.66284 65.6006 4.85008 65.2863 4.09181C64.972 3.33353 64.5115 2.64459 63.9309 2.06431C63.3503 1.48403 62.6612 1.02378 61.9028 0.709844C61.1443 0.395904 60.3315 0.234421 59.5107 0.234614C58.6898 0.234808 57.8771 0.396673 57.1188 0.71097C56.3605 1.02527 55.6716 1.48584 55.0913 2.06639L32.9997 24.1622L10.9038 2.06639C10.3276 1.46919 9.63813 0.992731 8.87576 0.66482C8.11339 0.33691 7.29335 0.164112 6.46348 0.156512C5.63362 0.148912 4.81055 0.306661 4.04231 0.620554C3.27406 0.934447 2.57602 1.3982 1.98892 1.98475C1.40181 2.5713 0.937403 3.2689 0.622786 4.03685C0.308168 4.8048 0.149643 5.62772 0.156461 6.45759C0.163278 7.28746 0.335301 8.10767 0.662492 8.87034C0.989684 9.63302 1.46549 10.3229 2.06215 10.8997L24.1663 32.9997L2.06632 55.0997C1.46966 55.6766 0.993852 56.3664 0.666661 57.1291C0.339469 57.8918 0.167445 58.712 0.160627 59.5419C0.15381 60.3717 0.312335 61.1946 0.626952 61.9626C0.94157 62.7305 1.40598 63.4281 1.99308 64.0147C2.58019 64.6012 3.27823 65.065 4.04647 65.3789C4.81472 65.6928 5.63779 65.8505 6.46765 65.8429C7.29751 65.8353 8.11755 65.6625 8.87992 65.3346C9.64229 65.0067 10.3317 64.5303 10.908 63.9331L32.9997 41.8414Z"
                                        fill="#546881" />
                                </svg>

                            </span>
                        </div>
                        <div class="card-body info-card">
                            <p><strong>ุงูุงุณู:</strong> ุฑูู ูุฌูุจ</p>
                            <p><strong>ุฑูู ุงููุงุชู:</strong> +967 775 817 596</p>
                            <p><strong>ุงูุฅูููู:</strong> reeemnajeb@gmail.com</p>
                        </div>
                        {% comment %} ๐form1 {% endcomment %}
                        <form method="POST" class="card-body form-card" id="form1">
                            {% csrf_token %}
                            <div class="mb-2">
                                <!-- <label>ุงูุงุณู:</label> -->
                                <div class="d-flex gap-2">
                                    <!-- <input type="text" class="form-control" value="ุฑูู">
                                    <input type="text" class="form-control" value="ูุฌูุจ"> -->
                                    <div class="col filde-container">
                                        <label class="form-label">ุงูุงุณู ุงูุฃูู</label>
                                        <input type="text" class="form-control " id="firstName" placeholder="ุฑูู" value="ุฑูู">
                                        <div class="invalid-feedback">ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงูุงุณู ุงูุฃูู</div>
                                        <!-- <div class="invalid">ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงูุงุณู ุงูุฃูู</div> -->
                                    </div>
                                    <div class="col filde-container">
                                        <label class="form-label">ุงุณู ุงูุนุงุฆูุฉ</label>
                                        <input type="text" class="form-control" id="lastName" placeholder="ูุฌูุจ" value="ูุฌูุจ">
                                        <div class="invalid-feedback">ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงุณู ุงูุนุงุฆูุฉ</div>
                                    </div>
                                </div>
                            </div>
                            <div class="phone mb-3 filde-container">
                                <label class="form-label">ุฑูู ุงููุงุชู</label>
                                <div class="input-group">
                                    <span class="input-group-text">+967</span>
                                    <input type="tel" class="form-control" id="phone" placeholder="7xx xxx xxx"
                                        value="775000000" pattern="[7-9][0-9]{8}">
                                </div>
                                <div class="invalid-feedback">ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฑูู ูุงุชู ุตุญูุญ</div>
                            </div>
                            <div class="mb-2">
                                <label>ุงูุฅูููู:</label>
                                <p>reeemnajeeb@gmail.com</p>
                            </div>
                            <div class="btn-primary-one-span">
                                <button class="btn-primary-save w-100" type="submit" id="btn_person_account" name="btn_person_account">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M18.25 0.75H3.25C2.58696 0.75 1.95107 1.01339 1.48223 1.48223C1.01339 1.95107 0.75 2.58696 0.75 3.25V20.75C0.75 21.413 1.01339 22.0489 1.48223 22.5178C1.95107 22.9866 2.58696 23.25 3.25 23.25H20.75C22.125 23.25 23.25 22.125 23.25 20.75V5.75L18.25 0.75ZM20.75 20.75H3.25V3.25H17.2125L20.75 6.7875V20.75ZM12 12C9.925 12 8.25 13.675 8.25 15.75C8.25 17.825 9.925 19.5 12 19.5C14.075 19.5 15.75 17.825 15.75 15.75C15.75 13.675 14.075 12 12 12ZM4.5 4.5H15.75V9.5H4.5V4.5Z"
                                            fill="#546881" />
                                    </svg>
                                </button>
                            </div>
                        </form>

                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span class="title">ุจูุงูุงุช ุงููููุน ูุงูุชูุตูู </span>
                            <span class="edit-icon">
                                <svg class="edit" width="20" height="20" viewBox="0 0 26 26" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M13 3.25H5.41667C4.84203 3.25 4.29093 3.47827 3.8846 3.8846C3.47827 4.29093 3.25 4.84203 3.25 5.41667V20.5833C3.25 21.158 3.47827 21.7091 3.8846 22.1154C4.29093 22.5217 4.84203 22.75 5.41667 22.75H20.5833C21.158 22.75 21.7091 22.5217 22.1154 22.1154C22.5217 21.7091 22.75 21.158 22.75 20.5833V13"
                                        stroke="#2B4254" stroke-width="2.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                    <path
                                        d="M19.906 2.84302C20.337 2.41204 20.9215 2.16992 21.531 2.16992C22.1405 2.16992 22.725 2.41204 23.156 2.84302C23.587 3.274 23.8291 3.85853 23.8291 4.46802C23.8291 5.07751 23.587 5.66204 23.156 6.09302L13.3919 15.8582C13.1347 16.1152 12.8169 16.3033 12.4679 16.4053L9.35544 17.3153C9.26222 17.3425 9.16341 17.3441 9.06934 17.32C8.97528 17.2959 8.88942 17.2469 8.82076 17.1783C8.7521 17.1096 8.70316 17.0238 8.67906 16.9297C8.65496 16.8356 8.65659 16.7368 8.68378 16.6436L9.59378 13.5312C9.69618 13.1824 9.88469 12.865 10.1419 12.6082L19.906 2.84302Z"
                                        stroke="#2B4254" stroke-width="2.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>

                                <svg class="cancel ms-3" width="20" height="20" viewBox="0 0 66 83" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M32.9997 41.8414L55.0955 63.9372C56.268 65.1097 57.8582 65.7684 59.5163 65.7684C61.1745 65.7684 62.7647 65.1097 63.9371 63.9372C65.1096 62.7647 65.7683 61.1745 65.7683 59.5164C65.7683 57.8583 65.1096 56.268 63.9371 55.0956L41.833 32.9997L63.933 10.9039C64.5133 10.3233 64.9735 9.63418 65.2874 8.87576C65.6014 8.11733 65.7629 7.3045 65.7627 6.48367C65.7625 5.66284 65.6006 4.85008 65.2863 4.09181C64.972 3.33353 64.5115 2.64459 63.9309 2.06431C63.3503 1.48403 62.6612 1.02378 61.9028 0.709844C61.1443 0.395904 60.3315 0.234421 59.5107 0.234614C58.6898 0.234808 57.8771 0.396673 57.1188 0.71097C56.3605 1.02527 55.6716 1.48584 55.0913 2.06639L32.9997 24.1622L10.9038 2.06639C10.3276 1.46919 9.63813 0.992731 8.87576 0.66482C8.11339 0.33691 7.29335 0.164112 6.46348 0.156512C5.63362 0.148912 4.81055 0.306661 4.04231 0.620554C3.27406 0.934447 2.57602 1.3982 1.98892 1.98475C1.40181 2.5713 0.937403 3.2689 0.622786 4.03685C0.308168 4.8048 0.149643 5.62772 0.156461 6.45759C0.163278 7.28746 0.335301 8.10767 0.662492 8.87034C0.989684 9.63302 1.46549 10.3229 2.06215 10.8997L24.1663 32.9997L2.06632 55.0997C1.46966 55.6766 0.993852 56.3664 0.666661 57.1291C0.339469 57.8918 0.167445 58.712 0.160627 59.5419C0.15381 60.3717 0.312335 61.1946 0.626952 61.9626C0.94157 62.7305 1.40598 63.4281 1.99308 64.0147C2.58019 64.6012 3.27823 65.065 4.04647 65.3789C4.81472 65.6928 5.63779 65.8505 6.46765 65.8429C7.29751 65.8353 8.11755 65.6625 8.87992 65.3346C9.64229 65.0067 10.3317 64.5303 10.908 63.9331L32.9997 41.8414Z"
                                        fill="#546881" />
                                </svg>

                            </span>
                        </div>

                        <div class="card-body info-card">
                            <p><strong>ุงููุญุงูุธุฉ:</strong> ุนุฏู</p>
                            <p><strong>ุงูุดุงุฑุน:</strong> ุงูุชูุงูู</p>
                            <p><strong>ูุตู ุงูุนููุงู:</strong> ูู ูุชู ุงูุชุญุฏูุฏ</p>
                            <p><strong>ุฑูู ูุงุชู ุฅุถุงูู:</strong> ูู ูุชู ุงูุชุญุฏูุฏ</p>
                        </div>
                        {% comment %} ๐form {% endcomment %}
                        <form method="POST" class="card-body form-card" id="form2">
                            {% csrf_token %}
                            <div class="container mt-5">
                                <select id="citySelect" class="form-control">
                                    <option value="">Select a City</option>
                                </select>
                                <select id="streetSelect" class="form-control mt-3">
                                    <option value="">Select a Street</option>
                                </select>
                            </div>
                     












                            
                            {% comment %} 
                            <div class="select mb-3">
                                <label>ุงููุญุงูุธุฉ</label>
                                <select class="form-select" aria-label="Small select example">
                                    <option value="">ุนุฏู</option>
                                    <option value="1">ุตูุนุงุก</option>
                                    <option value="2">ุงูุญุฏูุฏูุฉ</option>
                                </select>
                            </div>
                            <div class="select mb-3">
                                <label>ุงูุดุงุฑุน</label>
                                <select class="form-select" aria-label="Small select example">
                                    <option value="">ุงูุชูุงูู</option>
                                    <option value="1">ูุฑูุชุฑ</option>
                                    <option value="2">ุงููุนูุง</option>
                                </select>
                            </div> 
                            {% endcomment %}                          


































                            <div class="mb-2">
                                <label>ูุตู ุงูุนููุงู</label>
                                <input type="text" class="form-control" value="ูู ูุชู ุงูุชุญุฏูุฏ">
                            </div>
                            <div class="phone mb-3 filde-container">
                                <label class="form-label">ุฑูู ุงููุงุชู</label>
                                <div class="input-group">
                                    <span class="input-group-text">+967</span>
                                    <input type="tel" class="form-control" id="phone" placeholder="7xx xxx xxx"
                                        value="775000000" pattern="[7-9][0-9]{8}">
                                </div>
                                <div class="invalid-feedback">ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฑูู ูุงุชู ุตุญูุญ</div>
                            </div>
                            <div class="btn-primary-one-span">
                                <button class="btn-primary-save w-100" type="submit" id="btn" name="btn">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M18.25 0.75H3.25C2.58696 0.75 1.95107 1.01339 1.48223 1.48223C1.01339 1.95107 0.75 2.58696 0.75 3.25V20.75C0.75 21.413 1.01339 22.0489 1.48223 22.5178C1.95107 22.9866 2.58696 23.25 3.25 23.25H20.75C22.125 23.25 23.25 22.125 23.25 20.75V5.75L18.25 0.75ZM20.75 20.75H3.25V3.25H17.2125L20.75 6.7875V20.75ZM12 12C9.925 12 8.25 13.675 8.25 15.75C8.25 17.825 9.925 19.5 12 19.5C14.075 19.5 15.75 17.825 15.75 15.75C15.75 13.675 14.075 12 12 12ZM4.5 4.5H15.75V9.5H4.5V4.5Z"
                                            fill="#546881" />
                                    </svg>
                                </button>
                            </div>
                            
                        </form>
                        
                        {% comment %} end form {% endcomment %}
                    </div>

                </div>
            </div>
            
        </div>

    </section>


{% endblock %}
{% block javascript %}
    <script src="{% static 'js/forms.js' %}"></script>
    {% comment %} <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> {% endcomment %}
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    
    <script>
        $(document).ready(function() {
            $.get('/get_cities/', function(data) {
                var options = '<option value="">Select a City</option>';
                $.each(data, function(index, city) {
                    options += '<option value="' + city.id + '">' + city.name + '</option>';
                });
                $('#citySelect').html(options);
            });

            $('#citySelect').change(function() {
                var cityId = $(this).val();
                if (cityId) {
                    $.get('/get_streets/' + cityId + '/', function(data) {
                        var options = '<option value="">Select a Street</option>';
                        $.each(data, function(index, street) {
                            options += '<option value="' + street.id + '">' + street.name + '</option>';
                        });
                        $('#streetSelect').html(options);
                        console.log("Streets for city " + cityId + ":", data);
                    });
                } else {
                    $('#streetSelect').html('<option value="">Select a Street</option>');
                }
            });
        });
    </script>
    

    <script>
        document.addEventListener("DOMContentLoaded", function () {
           
            // โ ุงูุชุญูู ูู ุงููุงุชู ุฃุซูุงุก ุงููุชุงุจุฉ
            const phoneInput = document.getElementById("phone");
            if (phoneInput) {
                phoneInput.addEventListener("input", function () {
                    if (typeof runValidatePhoneInput === "function") {
                        runValidatePhoneInput();
                    }
                });
            }

            // โ ุงูุชุญูู ุนูุฏ ุฅุฑุณุงู ุงููููุฐุฌ
            const form1 = document.getElementById("form1");
            form1.addEventListener("submit", function (e) {
                let isValid = true;

                if (typeof runValidateAllFields === "function") {
                    isValid = isValid && runValidateAllFields();
                }
                
                if (typeof runValidatePhoneInput === "function") {
                    isValid = isValid && runValidatePhoneInput();
                }

                if (!isValid) {
                    e.preventDefault();
                }
            });

            const form2 = document.getElementById("form2");
            form2.addEventListener("submit", function (e) {
                let isValid = true;

                if (typeof runValidateAllFields === "function") {
                    isValid = isValid && runValidateAllFields();
                }

                if (!isValid) {
                    e.preventDefault();
                }
            });

        });

        document.addEventListener("DOMContentLoaded", function () {
            document.querySelectorAll(".account-section .edit-icon").forEach(iconContainer => {
                let editIcon = iconContainer.querySelector(".edit");
                let cancelIcon = iconContainer.querySelector(".cancel");
                let card = iconContainer.closest(".card"); // ุชุตุญูุญ ุงููุญุฏุฏ
                if (!card) return; // ุชุฃูุฏ ูู ูุฌูุฏ ุงูุนูุตุฑ

                let form = card.querySelector(".form-card");
                let displayInfo = card.querySelector(".info-card");
                form.style.display = "none";

                if (cancelIcon) cancelIcon.style.display = "none"; // ุฅุฎูุงุก ุฃููููุฉ ุงูุฅูุบุงุก ูู ุงูุจุฏุงูุฉ

                if (editIcon) {
                    editIcon.addEventListener("click", function () {
                        if (form && displayInfo) {
                            form.style.display = "block";
                            displayInfo.style.display = "none";
                            editIcon.style.display = "none";
                            if (cancelIcon) cancelIcon.style.display = "inline-block";
                        }
                    });
                }

                if (cancelIcon) {
                    cancelIcon.addEventListener("click", function () {
                        if (form && displayInfo) {
                            form.style.display = "none";
                            displayInfo.style.display = "block";
                            if (editIcon) editIcon.style.display = "inline-block";
                            cancelIcon.style.display = "none";
                        }
                    });
                }
            });
        });

    </script>
    <script>
        $(document).ready(function () {
            $("#form1").on("submit", function (e) {
                e.preventDefault();  // ููุน ุงูุชุญุฏูุซ ุงูุชููุงุฆู ููุตูุญุฉ

                let formData = {
                    first_name: $("#firstName").val(),
                    last_name: $("#lastName").val(),
                    phone_number: $("#phone").val(),
                    csrfmiddlewaretoken: $("input[name=csrfmiddlewaretoken]").val()  // ุญูุงูุฉ CSRF
                };

                $.ajax({
                    type: "POST",
                    url: "{% url 'update_profile' %}",  // ุงุณุชุจุฏููุง ุจุงููุณุงุฑ ุงูููุงุณุจ
                    data: formData,
                    dataType: "json",
                    success: function (response) {
                        if (response.status === "success") {
                            alert("ุชู ุชุญุฏูุซ ุงูุจูุงูุงุช ุจูุฌุงุญ!");
                        } else {
                            alert("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุชุญุฏูุซ!");
                        }
                    },
                    error: function () {
                        alert("ูุดู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ!");
                    }
                });
            });
        });
    </script>






























{% endblock %}
